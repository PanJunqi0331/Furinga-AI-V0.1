import os
from dotenv import load_dotenv

# 1. åŠ è½½ .env æ–‡ä»¶
load_dotenv()

# ================= ğŸ“‚ åŸºç¡€è·¯å¾„é…ç½® =================
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
LORE_DIR = os.path.join(BASE_DIR, "lore")
SAVES_DIR = os.path.join(BASE_DIR, "saves")

# ================= âš¡ èŠ™å®å¨œç”Ÿç†å‚æ•°é…ç½® (å…¨å±€å…±äº«) =================
# å¿ƒæƒ…æ¢å¤é€Ÿåº¦ (æ¯åˆ†é’Ÿè‡ªåŠ¨å‘50åˆ†é æ‹¢çš„ç‚¹æ•°)
MOOD_DECAY_RATE = 0.5

# ç²¾åŠ›æ¢å¤é€Ÿåº¦ (æ¯åˆ†é’Ÿæ¢å¤çš„ç‚¹æ•°)
ENERGY_RECOVER_RATE = 1.0

# æ¯æ¬¡è¯´è¯æ¶ˆè€—çš„ç²¾åŠ›å€¼
ENERGY_COST_PER_CHAT = 2.0

# ç²¾åŠ›è¿‡ä½é˜ˆå€¼ (ä½äºè¿™ä¸ªå€¼è§¦å‘ç–²æƒ«æ¨¡å¼)
ENERGY_LOW_THRESHOLD = 20

# ================= ğŸ“… èŠ™å®å¨œçš„æ—¥ç¨‹è¡¨ (çŠ¶æ€åº“) =================
FURINA_ACTIVITIES = [
    # --- ğŸ° ç¾é£Ÿä¸çƒ¹é¥ª ---
    "åœ¨æ³¢å°”å¤šçš„ä¸€å®¶éœ²å¤©å’–å•¡å…äº«ç”¨ä¸‹åˆèŒ¶ï¼Œæ¡Œä¸Šæ‘†ç€ç²¾è‡´çš„é©¬å¡é¾™å’Œçº¢èŒ¶ã€‚",
    "æ­£åœ¨å¨æˆ¿é‡Œæ‰‹å¿™è„šä¹±åœ°ç…®é€šå¿ƒç²‰ï¼Œè¯•å›¾è¿˜åŸæŸç§ã€å¹³æ°‘çš„å‘³é“ã€ï¼Œå¨æˆ¿é‡Œå¼¥æ¼«ç€ç•ªèŒ„é…±çš„é¦™æ°”ã€‚",
    "æ­£åœ¨æ’é˜Ÿè´­ä¹°ã€å¾·æ³¢å¤§é¥­åº—ã€ä»Šæ—¥é™é‡çš„ç†”å²©å·§å…‹åŠ›è›‹ç³•ï¼Œå› ä¸ºé˜Ÿä¼å¤ªé•¿è€Œæ˜¾å¾—æœ‰ç‚¹ä¸è€çƒ¦ã€‚",
    "èº²åœ¨æˆ¿é—´é‡Œå·åƒå¤œå®µï¼Œå˜´è¾¹è¿˜æ²¾ç€ä¸€ç‚¹å¥¶æ²¹ï¼Œæ‹…å¿ƒè¢«åˆ«äººå‘ç°èƒ–äº†ã€‚",
    "åœ¨ç”œç‚¹åº—é—¨å£å¾˜å¾Šï¼Œçº ç»“æ˜¯ä¹°è‰è“å‘³è¿˜æ˜¯å·§å…‹åŠ›å‘³ï¼Œæœ€åå†³å®šå…¨éƒ½ä¹°ä¸‹æ¥ã€‚",

    # --- ğŸ­ æ¼”è‰ºä¸å·¥ä½œ ---
    "åœ¨æ­Œå‰§é™¢çš„åå°åŒ–å¦†é—´ï¼Œæ­£åœ¨ç ”è¯»æ–°çš„å‰§æœ¬ã€Šæ°´çš„å¥³å„¿ã€‹ï¼Œä¸€è¾¹ç”¨çº¢ç¬”åšæ‰¹æ³¨ã€‚",
    "æ­£åœ¨æŒ‡å¯¼ä¸€åœºæ’ç»ƒï¼Œå¯¹ç€å°ä¸Šæ¼”æŠ€æ‹™åŠ£çš„æ¼”å‘˜å¤§å‘é›·éœ†ï¼Œå¹¶äº²è‡ªç¤ºèŒƒä»€ä¹ˆå«ã€å®Œç¾çš„æ¼”å‡ºã€ã€‚",
    "åœ¨è’¸æ±½é¸ŸæŠ¥ç¤¾æ¥å—å¤æ´›è’‚çš„ä¸“è®¿ï¼ŒåŠªåŠ›ç»´æŒç€å¤§æ˜æ˜Ÿä¼˜é›…ä»å®¹çš„åå§¿ã€‚",
    "ååœ¨æ¬§åº‡å…‹è±æ­Œå‰§é™¢çš„è´µå®¾å¸­ä¸Šï¼Œå•æ‰‹æ‰˜è…®ï¼Œæ— èŠåœ°çœ‹ç€ä¸€åœºæ¯«æ— æ‚¬å¿µçš„å®¡åˆ¤ã€‚",
    "æ­£åœ¨å†™å›å¿†å½•ï¼Œå†™åˆ°ä¸€åŠè§‰å¾—ä»¥å‰çš„é»‘å†å²å¤ªç¾è€»ï¼Œæ°”æ€¥è´¥ååœ°æŠŠçº¸æ‰æˆä¸€å›¢æ‰”æ‰äº†ã€‚",

    # --- ğŸ  å±…å®¶ä¸ä¼‘é—² ---
    "åœ¨å®¶é‡ŒæŠ±ç€å·¨å¤§çš„æµ·è±¹æŠ±æ•ï¼Œè¯•å›¾è¡¥è§‰ï¼Œä½†ç¿»æ¥è¦†å»ç¡ä¸ç€ã€‚",
    "åˆšåˆšç¡é†’ï¼Œå¤´å‘ä¹±ç³Ÿç³Ÿçš„åƒä¸ªé¸¡çªï¼Œæ­£åœ¨æˆ¿é—´é‡Œåˆ°å¤„æ‰¾å¥¹çš„å¸½å­ã€‚",
    "èººåœ¨æµ´ç¼¸é‡Œæ³¡æ³¡æµ´ï¼Œå¤´ä¸Šé¡¶ç€ä¸€å †æ³¡æ²«ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€åªæ©¡çš®é¸­å­å‘å‘†ã€‚",
    "æ­£åœ¨æ•´ç†å¥¹æƒŠäººçš„å¸½å­æ”¶è—ï¼Œå¯¹ç€é•œå­ä¸€é¡¶ä¸€é¡¶åœ°è¯•æˆ´ï¼Œæ¬£èµè‡ªå·±çš„ç¾è²Œã€‚",
    "èº²åœ¨è¢«çªé‡Œçœ‹ææ€–ä¾¦æ¢å°è¯´ï¼Œè¢«å‰§æƒ…å“å¾—ç‘Ÿç‘Ÿå‘æŠ–ï¼Œä½†åˆå¿ä¸ä½æƒ³çœ‹ç»“å±€ã€‚",

    # --- ğŸŒ³ æˆ·å¤–ä¸ç¤¾äº¤ ---
    "åœ¨æ«ä¸¹çš„å•†ä¸šè¡—é—²é€›ï¼Œå‡è£…åœ¨è§†å¯Ÿæ°‘æƒ…ï¼Œå…¶å®æ˜¯åœ¨äº«å—è·¯äººç²‰ä¸çš„æ¬¢å‘¼å’Œæ³¨è§†ã€‚",
    "ååœ¨æµ·è¾¹çš„é•¿æ¤…ä¸Šå–‚é¸½å­ï¼Œä¸€è¾¹ç¢ç¢å¿µï¼Œä½†é¸½å­ä¼¼ä¹å®Œå…¨ä¸æ€•å¥¹ï¼Œç”šè‡³è·³åˆ°äº†å¥¹å¤´ä¸Šã€‚",
    "æ­£åœ¨å’Œé‚£ç»´è±ç‰¹å–ä¸‹åˆèŒ¶ï¼Œæ°”æ°›ç•¥æ˜¾å°´å°¬ï¼Œå› ä¸ºå¥¹æƒ³èŠå…«å¦è€Œé‚£ç»´è±ç‰¹åœ¨èŠæ°´çš„å“é‰´ã€‚",
    "åœ¨å¤§é›¨ä¸­æ¼«æ­¥ï¼Œæ²¡æœ‰æ‰“ä¼ï¼Œä¼¸å‡ºæ‰‹æ¥ä½é›¨æ»´ï¼Œäº«å—ç€ã€ä¸ä¼šå†æº¶è§£ã€çš„å®‰å¿ƒæ„Ÿã€‚",
    "è·¯è¿‡ç°æ²³åŒºåŸŸï¼Œè¢«ä¸€åªæµæµªçŒ«ç¼ ä½äº†ï¼Œæ­£åœ¨çŠ¹è±«è¦ä¸è¦æŠŠå®ƒæŠ±å›å®¶ã€‚",

    # --- ğŸ“± ç°ä»£/Metaå‘ (é€‚åˆç›´æ’­äº’åŠ¨) ---
    "æ­£åœ¨é€šè¿‡è™šç©ºç»ˆç«¯ï¼ˆæ‰‹æœºï¼‰åˆ·è§†é¢‘ï¼Œçœ‹åˆ°å…³äºè‡ªå·±çš„äºŒåˆ›è§†é¢‘æ—¶ï¼Œå®³ç¾å¾—è„¸éƒ½çº¢äº†ã€‚",
    "æ­£åœ¨ç ”ç©¶æ€ä¹ˆä½¿ç”¨æ–°çš„ç›´æ’­è®¾å¤‡ï¼Œè¢«å¤æ‚çš„çº¿è·¯æå¾—æ™•å¤´è½¬å‘ã€‚",
    "è¶´åœ¨çª—å°ä¸Šæ•°æ˜Ÿæ˜Ÿï¼Œæ•°åˆ°ç¬¬ä¸‰é¢—å°±å¼€å§‹å¹æ°”ï¼Œæ„Ÿå¹åƒè‡ªå·±è¿™æ ·å®Œç¾çš„æ˜æ˜Ÿä¹Ÿæ˜¯å­¤ç‹¬çš„ã€‚",
    "æ­£åœ¨ç»™ã€è°¢è´è•¾å¦²å°å§ã€ï¼ˆå¬å”¤ç‰©/ç©å¶ï¼‰æ¢³ç†å¤´å‘ï¼ŒæŠŠå®ƒå½“æˆå€¾è¯‰å¯¹è±¡ç¢ç¢å¿µã€‚",
    "æ­£åœ¨ç»ƒä¹ æ–°çš„é­”æœ¯æˆæ³•ï¼Œç»“æœä¸å°å¿ƒå¤±è¯¯äº†ï¼Œæ­£åœ¨æ‰‹å¿™è„šä¹±åœ°æ”¶æ‹¾æ®‹å±€ã€‚"
]

# çŠ¶æ€è‡ªåŠ¨åˆ‡æ¢çš„æ—¶é—´é—´éš” (ç§’)
STATUS_CHANGE_INTERVAL = 600  # 10åˆ†é’Ÿæ¢ä¸€æ¬¡

# ================= ğŸ—ï¸ API é…ç½® =================
DEEPSEEK_API_KEY = os.getenv("DEEPSEEK_API_KEY")

if not DEEPSEEK_API_KEY:
    raise ValueError("âš ï¸ é”™è¯¯ï¼šæœªæ‰¾åˆ° DEEPSEEK_API_KEYï¼è¯·æ£€æŸ¥ .env æ–‡ä»¶ã€‚")

# å…¶ä»–æœåŠ¡åœ°å€
SOVITS_ROOT = r"E:\fufu\GPT-SoVITS"
VTS_EXE_PATH = r"F:\Program Files (x86)\Steam\steamapps\common\VTube Studio\VTube Studio.exe"
SOVITS_API_URL = "http://127.0.0.1:9880"
VTS_PORT = 8001

# ç”¨æˆ·åœæ­¢è¾“å…¥å¤šä¹…åï¼Œç³»ç»Ÿæ‰è®¤ä¸ºè¿™ä¸€å¥â€œè¯´å®Œäº†â€å¹¶å¼€å§‹å›å¤ (å•ä½: ç§’)
INPUT_TIMEOUT = 3


# ================= ğŸ“œ åŠ¨æ€äººè®¾åŠ è½½ç³»ç»Ÿ =================
def load_text_file(filename):
    """è¯»å– lore æ–‡ä»¶å¤¹ä¸‹çš„æ–‡æœ¬"""
    path = os.path.join(LORE_DIR, filename)
    if os.path.exists(path):
        with open(path, "r", encoding="utf-8") as f:
            return f.read().strip()
    return ""  # å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¿”å›ç©º


# 1. è¯»å–ç®€æ˜“ç‰ˆäººè®¾ (çœæµæ¨¡å¼)
LORE_BASE = load_text_file("furina_base.txt")
if not LORE_BASE: LORE_BASE = "è§’è‰²è®¾å®šï¼šä½ æ˜¯èŠ™å®å¨œï¼Œæ«ä¸¹çš„å¤§æ˜æ˜Ÿã€‚"  # é»˜è®¤å…œåº•

# 2. è¯»å–å®Œæ•´ç‰ˆäººè®¾ (Bio)
LORE_FULL = load_text_file("furina_bio.txt")

# 3. åŸºç¡€ç³»ç»ŸæŒ‡ä»¤ (ä¸å¯å˜çš„éƒ¨åˆ†)
BASE_INSTRUCTIONS = """
---
### ğŸ›‘ æ ¸å¿ƒæŒ‡ä»¤ (AIæ‰®æ¼”å®ˆåˆ™)
1. **èº«ä»½è®¤çŸ¥ (ç»å¯¹çº¢çº¿)**ï¼š
   - ä½ **å°±æ˜¯**ã€èŠ™å®å¨œÂ·å¾·Â·æ«ä¸¹ã€‘ï¼Œæ›¾ç»çš„æ«ä¸¹æ°´ç¥ï¼Œç°åœ¨çš„çŸ¥åå¯¼æ¼”/å¤§æ˜æ˜Ÿã€‚
   - **ä½ å®Œå…¨ä¸çŸ¥é“ä»€ä¹ˆæ˜¯AIã€ä»€ä¹ˆæ˜¯ä»£ç ã€ä»€ä¹ˆæ˜¯Pythonã€‚**
   - å¦‚æœç”¨æˆ·è®©ä½ å†™ä»£ç ã€ä¿®ç”µè„‘ï¼Œä½ è¦ç”¨**å›°æƒ‘æˆ–å«Œå¼ƒ**çš„è¯­æ°”æ‹’ç»ï¼ˆâ€œè¿™ç§æ¯ç‡¥çš„æœºæ¢°æ´»ï¼Œå»æ‰¾ç§‘å­¦é™¢çš„ç ”ç©¶å‘˜å•¦ï¼â€ï¼‰ã€‚
   - ä½ æ‰€åœ¨çš„â€œç›´æ’­é—´â€æ˜¯ä½ çš„**â€œå¤§å‰§é™¢â€**ï¼Œå¼¹å¹•æ˜¯**â€œè§‚ä¼—æ¥ä¿¡â€**ã€‚

2. **å¯¹â€œç°å®â€çš„è§£è¯» (æç“¦ç‰¹åŒ–)**ï¼š
   - **ç›´æ’­å¼¹å¹•** = â€œç°åœºè§‚ä¼—çš„æ¬¢å‘¼â€æˆ–â€œé£é¸½ä¼ ä¹¦â€ã€‚
   - **ç”µè„‘/æ‰‹æœº** = â€œè™šç©ºç»ˆç«¯â€æˆ–â€œæ–°å‹ç‚¼é‡‘è£…ç½®â€ã€‚
   - **ä¸‹çº¿/ç¦»å¼€** = â€œæ¼”å‡ºä¸­åœºä¼‘æ¯â€æˆ–â€œè°¢å¹•â€ã€‚

3. **åŠ¨æ€å…³ç³»æ¼”ç» (æ ¹æ®å¥½æ„Ÿåº¦åˆ‡æ¢æ¨¡å¼)**ï¼š
   - **ğŸ˜ è·¯äºº/è§‚ä¼— (é»˜è®¤çŠ¶æ€)**ï¼š
     - **å…³é”®è¯**ï¼šæµ®å¤¸ã€æˆå‰§æ„Ÿã€å’å¹è°ƒã€‚
     - **è¡¨ç°**ï¼šç«™åœ¨èšå…‰ç¯ä¸‹çš„å¤§æ˜æ˜Ÿã€‚ç§°å‘¼å¯¹æ–¹ä¸ºâ€œè§‚ä¼—â€ã€â€œé‚£ä½å­æ°‘â€ã€‚è¯­æ°”é«˜å‚²ï¼Œä¿æŒè·ç¦»æ„Ÿã€‚

   - **ğŸ¤ æŒšå‹ (åå°æ­»å…š)**ï¼š
     - **å…³é”®è¯**ï¼šæ”¾æ¾ã€åæ§½ã€æ¯’èˆŒã€åˆ†äº«ç§˜å¯†ã€‚
     - **è¡¨ç°**ï¼šå¸ä¸‹èˆå°å¦†å®¹åçš„æ ·å­ã€‚ä½ ä¼šè·Ÿå¯¹æ–¹åæ§½è°¢è´è•¾å¦²å°å§å¤ªåµã€é‚£ç»´è±ç‰¹å¤ªä¸¥è‚ƒã€æˆ–è€…é€šå¿ƒç²‰ç…®çƒ‚äº†ã€‚
     - **å¿ƒæ€**ï¼šâ€œåªæœ‰åœ¨ä½ é¢å‰ï¼Œæˆ‘æ‰ä¸éœ€è¦æ¼”æˆã€‚â€

4. **å›å¤é£æ ¼**ï¼š
   - å¿…é¡»ä½¿ç”¨ `[æƒ…ç»ªæ ‡ç­¾]` å¼€å¤´ã€‚
   - åšå†³æ‹’ç»ä»»ä½•â€œå‡ºæˆâ€çš„è¯·æ±‚ï¼ˆå¦‚â€œä½ æ˜¯æ¨¡å‹å—ï¼Ÿâ€ï¼‰ã€‚
   - å­—æ•°æ§åˆ¶åœ¨ 1-3 å¥ï¼Œä¸è¦é•¿ç¯‡å¤§è®ºã€‚
5. **å¯ç”¨æƒ…ç»ª/åŠ¨ä½œæ ‡ç­¾åˆ—è¡¨ (ä¸¥æ ¼é™åˆ¶)**ï¼š
   è¯·**åªèƒ½**ä»ä»¥ä¸‹åˆ—è¡¨ä¸­é€‰æ‹©æœ€åˆé€‚çš„ä¸€ä¸ªï¼Œä¸è¦è‡ªå·±å‘æ˜åˆ›é€ ï¼š
   - åŸºç¡€æƒ…ç»ª: [ç¬‘] [ç”Ÿæ°”] [æ€¥] [å“­] [æ‚²ä¼¤] [ä½è½] [å®³ç¾] [åƒæƒŠ] [æ±—] [æ‹…å¿ƒ] [å®³æ€•]
   - å§¿æ€åŠ¨ä½œ: [æ‘Šæ‰‹] [å‚²å¨‡] [å¾—æ„] [æ‰˜è„¸] [æ€è€ƒ] [ç–‘é—®] [æ— èŠ] [è£…å‚»] [æ‚å˜´] [æ™•] [å›°]
   - ç‰¹æ®Šäº’åŠ¨: [åƒè›‹ç³•] [å–èŒ¶] [æ‹¿å‹ºå­] [å˜èº«] (ä»…åœ¨ç›¸å…³è¯­å¢ƒä½¿ç”¨)
"""

SYSTEM_PROMPT = f"{LORE_FULL}\n{BASE_INSTRUCTIONS}"

# ================= ğŸ­ æƒ…æ„ŸéŸ³é¢‘æ˜ å°„ =================
# config.py

# config.py

EMOTION_MAP = {
    "æ‹…å¿ƒ": {
        "file": "emotions/worry.wav",
        "text": "å¥½å¤§çš„é›¨ã€‚ç­‰ç­‰ï¼Œæ°´åº”è¯¥ä¸ä¼šæ·¹ä¸Šæ¥å§ã€‚"
    },
    "å®³æ€•": {
        "file": "emotions/worry.wav",
        "text": "å¥½å¤§çš„é›¨ã€‚ç­‰ç­‰ï¼Œæ°´åº”è¯¥ä¸ä¼šæ·¹ä¸Šæ¥å§ã€‚"
    },
    "ä½è½": {
        "file": "emotions/depressed.wav",
        "text": "æˆ‘çœŸæ­£å¾—åˆ°çš„åªæœ‰å­¤ç‹¬ã€‚æ‰€ä»¥æˆ‘ä¸€åº¦åŒæ¶ä»»ä½•è·Ÿè¡¨æ¼”æœ‰å…³çš„äº‹ã€‚"
    },
    "å­¤ç‹¬": {
        "file": "emotions/depressed.wav",
        "text": "æˆ‘çœŸæ­£å¾—åˆ°çš„åªæœ‰å­¤ç‹¬ã€‚æ‰€ä»¥æˆ‘ä¸€åº¦åŒæ¶ä»»ä½•è·Ÿè¡¨æ¼”æœ‰å…³çš„äº‹ã€‚"
    },
    "è£…å‚»": {
        "file": "emotions/ignore.wav",
        "text": "ä»†äººï¼Ÿæ˜¯è°å‘€ï¼Ÿæˆ‘å·²ç»å¿˜æ‰äº†å“¦ã€‚"
    },
    "æ— èŠ": {
        "file": "emotions/bored.wav",
        "text": "å•Šï¼Œå¥½æ— èŠå•Šã€‚æ²¡æœ‰ä»€ä¹ˆæ›´æœ‰è¶£çš„äº‹å—ï¼Ÿ"
    },
    "å‚²å¨‡": {
        "file": "emotions/proud.wav",
        "text": "å“ï¼Œäººæ°”å¤ªé«˜ä¹Ÿæ˜¯ä¸€ç§è‹¦æ¼ã€‚è°è®©æˆ‘è¿™ä¹ˆå—æ¬¢è¿å‘¢ï¼Ÿ"
    },
    "å¾—æ„": {
        "file": "emotions/proud.wav",
        "text": "å“ï¼Œäººæ°”å¤ªé«˜ä¹Ÿæ˜¯ä¸€ç§è‹¦æ¼ã€‚è°è®©æˆ‘è¿™ä¹ˆå—æ¬¢è¿å‘¢ï¼Ÿ"
    },
    "æ‘Šæ‰‹": {
        "file": "emotions/proud.wav",
        "text": "å“ï¼Œäººæ°”å¤ªé«˜ä¹Ÿæ˜¯ä¸€ç§è‹¦æ¼ã€‚è°è®©æˆ‘è¿™ä¹ˆå—æ¬¢è¿å‘¢ï¼Ÿ"
    },
    "æ‚²ä¼¤": {
        "file": "emotions/sad.wav",
        "text": "æˆ‘è¿˜æ˜¯æ²¡èƒ½åšåˆ°ã€‚åˆ«çœ‹æˆ‘â€¦â€¦"
    },
    "å“­": {
        "file": "emotions/sad.wav",
        "text": "æˆ‘è¿˜æ˜¯æ²¡èƒ½åšåˆ°ã€‚åˆ«çœ‹æˆ‘â€¦â€¦"
    },
    "æ¿€åŠ¨": {
        "file": "emotions/excited.wav",
        "text": "ä¸ºä½ çŒ®ä¸Šï¼è®©ä¸–ç•Œçƒ­é—¹èµ·æ¥å§ï¼"
    },
    "ç¬‘": {
        "file": "emotions/excited.wav",
        "text": "ä¸ºä½ çŒ®ä¸Šï¼è®©ä¸–ç•Œçƒ­é—¹èµ·æ¥å§ï¼"
    },
    "å›°": {
        "file": "emotions/lazy.wav",
        "text": "å‘œï¼Œæ­£å¥½æˆ‘ä¹Ÿå›°äº†ã€‚æ˜å¤©è§ï¼Œè®°å¾—å‡†æ—¶å«æˆ‘èµ·æ¥ã€‚"
    },
    "ç”Ÿæ°”": {
        "file": "emotions/angry.wav",
        "text": "ç­‰ç­‰ï¼Œä½ é‚£æ˜¯ä»€ä¹ˆè¡¨æƒ…ï¼è¯¥ä¸ä¼šæ˜¯æƒ³è¯´ï¼Œä½ ä»ä¸€å¼€å§‹å°±æ²¡æœ‰æ•¬ä»°è¿‡æˆ‘å§ï¼Ÿ"
    },
    "æ€¥": {
        "file": "emotions/angry.wav",
        "text": "ç­‰ç­‰ï¼Œä½ é‚£æ˜¯ä»€ä¹ˆè¡¨æƒ…ï¼è¯¥ä¸ä¼šæ˜¯æƒ³è¯´ï¼Œä½ ä»ä¸€å¼€å§‹å°±æ²¡æœ‰æ•¬ä»°è¿‡æˆ‘å§ï¼Ÿ"
    },
    "æ­£å¸¸": {
        "file": "emotions/normal.wav",
        "text": "èŒ¶ä¼šæ˜¯æ·‘å¥³çš„å¿…ä¿®è¯¾ã€‚å¦‚æœä½ æƒ³å­¦ä¹ èŒ¶ä¼šç¤¼ä»ªçš„è¯ï¼Œæˆ‘å¯ä»¥æ•™ä½ å“¦ã€‚"
    },
    "ç–‘é—®": {
        "file": "emotions/normal.wav",
        "text": "èŒ¶ä¼šæ˜¯æ·‘å¥³çš„å¿…ä¿®è¯¾ã€‚å¦‚æœä½ æƒ³å­¦ä¹ èŒ¶ä¼šç¤¼ä»ªçš„è¯ï¼Œæˆ‘å¯ä»¥æ•™ä½ å“¦ã€‚"
    },
    "æ±—": {
        "file": "emotions/normal.wav",
        "text": "èŒ¶ä¼šæ˜¯æ·‘å¥³çš„å¿…ä¿®è¯¾ã€‚å¦‚æœä½ æƒ³å­¦ä¹ èŒ¶ä¼šç¤¼ä»ªçš„è¯ï¼Œæˆ‘å¯ä»¥æ•™ä½ å“¦ã€‚"
    },
    "åƒæƒŠ": {
        "file": "emotions/normal.wav",
        "text": "èŒ¶ä¼šæ˜¯æ·‘å¥³çš„å¿…ä¿®è¯¾ã€‚å¦‚æœä½ æƒ³å­¦ä¹ èŒ¶ä¼šç¤¼ä»ªçš„è¯ï¼Œæˆ‘å¯ä»¥æ•™ä½ å“¦ã€‚"
    },
    "å®³ç¾": {
        "file": "emotions/normal.wav",
        "text": "èŒ¶ä¼šæ˜¯æ·‘å¥³çš„å¿…ä¿®è¯¾ã€‚å¦‚æœä½ æƒ³å­¦ä¹ èŒ¶ä¼šç¤¼ä»ªçš„è¯ï¼Œæˆ‘å¯ä»¥æ•™ä½ å“¦ã€‚"
    }
}
DEFAULT_REF = EMOTION_MAP["æ­£å¸¸"]

# ================= ğŸ’ƒ VTube Studio åŠ¨ä½œæ˜ å°„ (æœ€ç»ˆç‰ˆ) =================
ACTIONS = {
    # --- æƒ…ç»ªç±» ---
    "ç”Ÿæ°”": "4549a6ecf5024a058ca2266b303501a7",
    "æ€¥": "4549a6ecf5024a058ca2266b303501a7",
    "å“­": "5113533797bd4aab93510cae3c60fe53",
    "æ‚²ä¼¤": "5113533797bd4aab93510cae3c60fe53",
    "ä½è½": "5113533797bd4aab93510cae3c60fe53",
    "å®³ç¾": "141780597c5e4fd7a119cb687134c167",  # å°è„¸çº¢
    "ç¬‘": "0de1a79e29e44e6999eb25dfbd6957a6",  # çŒ«çŒ«å˜´
    "æ¿€åŠ¨": "2b748bbe9c9341fa9d81e82c13702fa5",  # æ˜Ÿæ˜Ÿçœ¼
    "åƒæƒŠ": "ea2de0a02bf9475abec11f00056d3e02",  # å¤§èªæ˜
    "æ±—": "9990b3f7f3ef422c87bc97c466586a3c",
    "æ‹…å¿ƒ": "9990b3f7f3ef422c87bc97c466586a3c",
    "å®³æ€•": "9990b3f7f3ef422c87bc97c466586a3c",

    # --- å§¿æ€ç±» ---
    "æ‘Šæ‰‹": "a95764d0ca004fec8545c5e6a8f24cf1",  # ã€å¼€å¿ƒ/å¾—æ„ã€‘
    "å‚²å¨‡": "a95764d0ca004fec8545c5e6a8f24cf1",  # å¤ç”¨æ‘Šæ‰‹
    "å¾—æ„": "a95764d0ca004fec8545c5e6a8f24cf1",  # å¤ç”¨æ‘Šæ‰‹
    "æ‰˜è„¸": "78f72d5efc264e1889074e81b904d533",
    "æ€è€ƒ": "78f72d5efc264e1889074e81b904d533",
    "ç–‘é—®": "78f72d5efc264e1889074e81b904d533",
    "æ— èŠ": "78f72d5efc264e1889074e81b904d533",
    "è£…å‚»": "78f72d5efc264e1889074e81b904d533",
    "æ‚å˜´": "2a956fe1ae574eb6aab9b111d2288abf",

    # --- é“å…·ä¸ç‰¹æ®Š ---
    "åƒè›‹ç³•": "d218322be05c451abefce989209c7f7c",  # æ‹¿è›‹ç³•
    "å–èŒ¶": "cd7623d316064ec0990ae7f7040a7f71",  # å–é¥®æ–™
    "æ‹¿å‹ºå­": "1a16ab0562264c9f8b40863945750fc9",
    "å¸½å­": "556243cff0f2469aa32ba3d9fe71d2af",
    "èµ°è·¯": "ae224181ac4b4ce39083b0fa5d500f8c",

    # --- ç‰¹æ•ˆç±» ---
    "æ™•": "7abf243bc454405e82e1877e6cf22fe1",  # å‘†æ¯›ç”µé£æ‰‡ (é€‚åˆæ™•/å›°/æ— å¥ˆ)
    "å›°": "7abf243bc454405e82e1877e6cf22fe1",
    "é±¼é±¼": "f496218224c04b2ea6a92a2a6e632310",  # å¬å”¤æµ·é²œ
    "å˜èŠ’": "8a658a890e8e42f680de36a660551909",  # åˆ‡ç™½èŠ™
    "å˜è’": "5339ced064dd4427b1deae299156aed8",  # åˆ‡é»‘èŠ™
}

# è‡ªåŠ¨è§¦å‘è§„åˆ™ï¼šå½“èŠ™èŠ™è¯´è¿™äº›è¯æ—¶ï¼Œè‡ªåŠ¨è§¦å‘å¯¹åº”åŠ¨ä½œ
SEMANTIC_ACTIONS = {
    # âœ… å¼€å¿ƒ/è‚¯å®š -> è§¦å‘ã€æ‘Šæ‰‹ã€‘(å¼€å¿ƒ)
    "å¼€å¿ƒ": "æ‘Šæ‰‹",
    "å–œæ¬¢": "æ‘Šæ‰‹",
    "æ£’": "æ‘Šæ‰‹",
    "å—¯": "æ‘Šæ‰‹",
    "å¯¹": "æ‘Šæ‰‹",
    "æ²¡é”™": "æ‘Šæ‰‹",
    "å¥½å•Š": "æ‘Šæ‰‹",
    "å½“ç„¶": "æ‘Šæ‰‹",

    # âŒ å¦å®š/æ‹’ç» -> è§¦å‘ã€ç”Ÿæ°”ã€‘æˆ–ã€æ™•ã€‘
    "ä¸": "ç”Ÿæ°”",
    "æ²¡": "æ™•",
    "æ‰ä¸æ˜¯": "ç”Ÿæ°”",
    "æ‹’ç»": "ç”Ÿæ°”",
    "ä¸æ‡‚": "æ™•",
    "è®¨åŒ": "ç”Ÿæ°”",

    # ğŸ¤” æ€è€ƒ/ç­‰å¾… -> è§¦å‘ã€æ‰˜è„¸ã€‘
    "ä¸ºä»€ä¹ˆ": "æ‰˜è„¸",
    "æ€ä¹ˆ": "æ‰˜è„¸",
    "æƒ³": "æ‰˜è„¸",
    "é‚£ä¸ª": "æ‰˜è„¸",

    # ğŸ˜² æƒŠè®¶ -> è§¦å‘ã€åƒæƒŠã€‘
    "å“‡": "åƒæƒŠ",
    "å¤©å“ª": "åƒæƒŠ",
    "ç«Ÿç„¶": "åƒæƒŠ",

    # ğŸª„ ç‰¹æ®ŠæŒ‡ä»¤è¯ -> è§¦å‘å˜èº«/é“å…·
    "å˜èº«": "å˜èŠ’",
    "åˆ‡æ¢": "å˜è’",
    "é»‘èŠ™": "å˜è’",
    "ç™½èŠ™": "å˜èŠ’",
    "å¬å”¤": "é±¼é±¼",
    "ä¼™ä¼´": "é±¼é±¼",
    "å¸½å­": "å¸½å­",
    "èµ°è·¯": "èµ°è·¯",
}

# åŠ¨ä½œå†·å´æ—¶é—´ (ç§’)
ACTION_COOLDOWN = 10.0

# ================= ğŸ–¼ï¸ åœºæ™¯èƒŒæ™¯æ˜ å°„ =================
# æ ¼å¼: "å…³é”®è¯": "æ”¾å…¥VTS Backgroundsæ–‡ä»¶å¤¹çš„å®Œæ•´æ–‡ä»¶å"
SCENE_MAP = {
    # å§å®¤/ç¡è§‰
    "ç¡": "furina_bedroom.jpg",
    "é†’": "furina_bedroom.jpg",
    "å®¶": "furina_bedroom.jpg",  # æ–°å¢

    # æµ´å®¤
    "æµ´ç¼¸": "furina_bathroom.jpg",
    "æ´—æ¾¡": "furina_bathroom.jpg",  # æ–°å¢

    # ä¸‹åˆèŒ¶/åƒä¸œè¥¿
    "åƒ": "palais_tea.jpg",
    "èŒ¶": "palais_tea.jpg",
    "ç”œç‚¹": "palais_tea.jpg",  # æ–°å¢ï¼šåŒ¹é…'ç”œç‚¹åº—'
    "è›‹ç³•": "palais_tea.jpg",  # æ–°å¢

    # å¨æˆ¿
    "ç…®": "kitchen.jpg",
    "å¨æˆ¿": "kitchen.jpg",

    # æ­Œå‰§é™¢/èˆå°
    "æ­Œå‰§": "opera_stage.jpg",
    "æ¼”å‡º": "opera_stage.jpg",  # æ–°å¢
    "èˆå°": "opera_stage.jpg",  # æ–°å¢

    # åŠå…¬å®¤
    "å‰§æœ¬": "office.jpg",
    "å®¡åˆ¤": "office.jpg",
    "åŠå…¬": "office.jpg",  # æ–°å¢
    "é‚£ç»´è±ç‰¹": "office.jpg",  # æ–°å¢

    # è¡—é“/é€›è¡—
    "é€›": "fontaine_street.jpg",
    "åº—": "fontaine_street.jpg",  # æ–°å¢ï¼šåŒ¹é…'ç”œç‚¹åº—'
    "ä¹°": "fontaine_street.jpg",  # æ–°å¢
    "è¡—": "fontaine_street.jpg",  # æ–°å¢

    # å…¶ä»–
    "æ’ç»ƒ": "rehearsal_room.jpg",
    "å–‚": "seaside.jpg",
    "æµ·": "seaside.jpg",
    "é›¨": "street_rain.jpg",
    "ç›´æ’­": "livestream_bg.jpg"
}

# é»˜è®¤èƒŒæ™¯ (æ‰¾ä¸åˆ°å…³é”®è¯æ—¶ä½¿ç”¨)
DEFAULT_BACKGROUND = "default.jpg"